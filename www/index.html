<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Web Status</title>
    <!-- Bootstrap CSS (CDN) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css">
    <style>
  body { padding: 20px; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; }
  .tab-pane { display: none; }
  .tab-pane.active { display: block; }
  pre { background:#f8f8f8; padding:10px; border:1px solid #ddd; }
  .small-muted { font-size:90%; color:#666; }
  .dl-horizontal dt { width:200px; }
  .page-header h1 { margin-bottom:6px; }
  .table-condensed th, .table-condensed td { padding:6px; }
  .table-hover > tbody > tr:hover { background-color:#f5f5f5; }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="page-header">
        <h1 id="hostname">Hostname</h1>
        <p class="small-muted">IP: <span id="ip"></span> &nbsp; Uptime: <span id="uptime"></span></p>
      </div>

      <!-- Tabs (matching bmk-webstatus.py ordering and labels) -->
      <ul id="mainTabs" class="nav nav-tabs">
        <li role="presentation"><a href="#tab-main"><span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span> Übersicht</a></li>
        <li role="presentation" class="active"><a href="#tab-status"><span class="glyphicon glyphicon-dashboard" aria-hidden="true"></span> Status</a></li>
        <li role="presentation" id="tab-olsr2-link" style="display:none"><a href="#tab-olsr2"><span class="glyphicon glyphicon-dashboard" aria-hidden="true"></span> OLSRv2</a></li>
        <li role="presentation"><a href="#tab-contact"><span class="glyphicon glyphicon-user" aria-hidden="true"></span> Kontakt</a></li>
        <li id="nav-host" style="float:right; padding:8px 12px;"></li>
        <li id="nav-login" style="float:right; display:none; padding:6px 12px;"><a id="nav-login-link" href="#" target="_blank"><span class="glyphicon glyphicon-user" aria-hidden="true"></span> Login</a></li>
      </ul>

      <div class="tab-content" style="margin-top:15px">
        <!-- Status -->
        <div id="tab-status" class="tab-pane active">
          <dl class="dl-horizontal">
            <dt>System Uptime <span class="glyphicon glyphicon-time" aria-hidden="true"></span></dt>
            <dd><span id="dl-uptime">-</span></dd>
            <dt>IPv4 Default-Route <span class="glyphicon glyphicon-transfer" aria-hidden="true"></span></dt>
            <dd><span id="dl-default-route"><span id="default-route">n/a</span></span></dd>
            <dt>mgmt Devices <span class="glyphicon glyphicon-signal" aria-hidden="true"></span></dt>
            <dd>
          </dl>
          <div class="table-responsive">
            <table id="devicesTable" class="table table-hover table-bordered table-condensed">
              <thead>
                <tr>
                  <th>Local (IP / HW)</th>
                  <th>Hostname</th>
                  <th>Product</th>
                  <th>Uptime</th>
                  <th>Mode</th>
                  <th>ESSID</th>
                  <th>Firmware</th>
                  <th>Wireless</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>

        <!-- Main / Willkommen -->
        <div id="tab-main" class="tab-pane">
          <div class="page-header">
            <h1>Willkommen auf <span id="main-host"> </span></h1>
          </div>
          <div class="panel panel-default">
            <div class="panel-body"><b>WAS?</b></div>
            <div class="panel-footer">FunkFeuer ist ein freies, experimentelles Netzwerk in Wien, Graz, der Weststeiermark, in Teilen des Weinviertels (N&Ouml;) und in Bad Ischl. Es wird aufgebaut und betrieben von computerbegeisterten Menschen. Das Projekt verfolgt keine kommerziellen Interessen.</div>
          </div>
          <div class="panel panel-default">
            <div class="panel-body"><b>FREI?</b></div>
            <div class="panel-footer">FunkFeuer ist offen f&uuml;r jeden und jede, der/die Interesse hat und bereit ist mitzuarbeiten. Es soll dabei ein nicht reguliertes Netzwerk entstehen, welches das Potential hat, den digitalen Graben zwischen den sozialen Schichten zu &Uuml;berbr&uuml;cken und so Infrastruktur und Wissen zur Verf&uuml;gung zu stellen. Zur Teilnahme an FunkFeuer braucht man einen WLAN Router (gibt's ab 60 Euro) oder einen PC, das OLSR Programm, eine IP Adresse von FunkFeuer, etwas Geduld und Motivation. Auf unserer Karte ist eingezeichnet, wo man FunkFeuer schon &Uuml;berall (ungef&auml;r) empfangen kann (bitte beachte, dass manchmal H&auml;user oder &Auml;hnliches im Weg sind, dann geht's nur &uuml;ber Umwege).</div>
          </div>
        </div>

        <!-- Contact -->
        <div id="tab-contact" class="tab-pane">
          <h3>Kontakt</h3>
          <p>Kontaktinformationen...</p>
        </div>

        <!-- OLSR Links -->
    <div id="tab-olsr" class="tab-pane">
          <h3>OLSR Links</h3>
          <div class="table-responsive">
            <table id="olsrLinksTable" class="table table-bordered table-condensed">
              <thead>
                <tr>
                  <th>Intf</th>
                  <th>Local</th>
                  <th>Remote</th>
                  <th>Remote Host</th>
                  <th>LQ</th>
                  <th>NLQ</th>
                  <th>Cost</th>
                  <th>Routes</th>
                  <th>Nodes</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>

        <!-- Neighbors -->
        <div id="tab-neighbors" class="tab-pane">
          <h3>Neighbors</h3>
          <div class="table-responsive">
            <table id="neighborsTable" class="table table-bordered table-condensed">
              <thead>
                <tr>
                  <th>Originator</th>
                  <th>Hostname</th>
                  <th>BindTo</th>
                  <th>LQ</th>
                  <th>NLQ</th>
                  <th>Cost</th>
                  <th>Metric</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>

        <!-- Connections -->
        <div id="tab-connections" class="tab-pane">
          <h3>Connections <button id="refresh-connections" class="btn btn-xs btn-default">Refresh</button>
            <span id="connections-status" class="small-muted"></span></h3>
          <div class="table-responsive">
            <table id="connectionsTable" class="table table-condensed table-striped">
              <thead>
                <tr>
                  <th data-key="port">Port</th>
                  <th data-key="bridge">Bridge</th>
                  <th data-key="macs">MACs</th>
                  <th data-key="ips">IPs</th>
                  <th data-key="hostnames">Hostnames</th>
                  <th data-key="notes">Notes</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>

        <!-- Versions -->
        <div id="tab-versions" class="tab-pane">
          <h3>Versions <button id="refresh-versions" class="btn btn-xs btn-default">Refresh</button>
            <span id="versions-status" class="small-muted"></span></h3>
          <div id="versions-wrap"></div>
        </div>

        <!-- Raw JSON -->
        <div id="tab-json" class="tab-pane">
          <h3>Raw JSON</h3>
          <pre id="p-json">Loading…</pre>
        </div>

        <!-- Traceroute -->
        <div id="tab-traceroute" class="tab-pane">
          <h3>Traceroute</h3>
          <div class="form-inline" style="margin-bottom:8px">
            <input id="tr-host" class="form-control input-sm" placeholder="host or ip" style="width:320px">
            <button id="tr-run" class="btn btn-sm btn-primary">Run</button>
          </div>
          <pre id="p-traceroute" style="display:none;">Traceroute output will appear here</pre>
          <div class="table-responsive" style="margin-top:8px">
            <table id="tracerouteTable" class="table table-condensed table-striped">
              <thead>
                <tr><th>#</th><th>IP</th><th>Hostname</th><th>Ping</th></tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>

        <!-- OLSR2 (populated when available) -->
        <div id="tab-olsr2" class="tab-pane">
          <h3>OLSR2</h3>
          <pre id="olsr2info"></pre>
        </div>

        <!-- Admin (link only) -->
        <div id="tab-admin" class="tab-pane">
          <h3>Admin</h3>
          <p><a id="adminLink" href="#" target="_blank">Login</a></p>
        </div>

      </div>

      <footer style="margin-top:20px" class="small-muted">Served by olsrd-status-plugin</footer>
    </div>

    <!-- jQuery + Bootstrap JS (CDN) -->
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js"></script>
    <!-- App JS -->
    <script src="/js/app.js"></script>
  </body>
</html>
